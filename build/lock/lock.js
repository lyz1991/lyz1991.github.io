!function(t){var e={};function c(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=t,c.c=e,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},c.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c(c.s=0)}([function(t,e,c){"use strict";var r=function(){function t(t,e){for(var c=0;c<e.length;c++){var r=e[c];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,c,r){return c&&t(e.prototype,c),r&&t(e,r),e}}();new(function(){function t(e,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.getElementById("lock"),this.ctx=this.canvas.getContext("2d"),this.maps=c,this.records=[],this.recordsT=[],this.locked=!1,this.startX=null,this.startY=null,this.from=null,this.left=this.canvas.getBoundingClientRect().left,this.drawdots(this.maps),this.top=this.canvas.getBoundingClientRect().top,this.bind()}return r(t,[{key:"drawdots",value:function(t,e){var c=this;t.forEach(function(t){c.ctx.beginPath(),c.ctx.arc(t.x,t.y,5,0,2*Math.PI,!1),t.state&&!e&&(c.ctx.save(),c.ctx.strokeStyle="red"),c.ctx.stroke(),c.ctx.closePath(),c.ctx.restore()})}},{key:"bind",value:function(){var e=this,c=void 0;this.canvas.addEventListener("mousedown",function(t){c=!0,e.startX=t.clientX,e.startY=t.clientY,e.ctx.moveTo(e.startX-e.left,e.startY-e.top)}),this.canvas.addEventListener("mousemove",function(t){c&&(e.from&&(e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawrecords(e.locked?e.recordsT:e.records),e.drawdots(e.maps),e.from?e.ctx.moveTo(e.from.x,e.from.y):e.ctx.moveTo(e.startX-e.left,e.startY-e.top),e.ctx.lineTo(t.clientX-e.left,t.clientY-e.top),e.ctx.stroke()),e.checkDistance(t.clientX-e.left,t.clientY-e.top))}),document.addEventListener("mouseup",function(r){c=!1;var s=e.locked?e.recordsT:e.records;if(s.length<2)return e.locked?e.recordsT=[]:e.records=[],t.restore(e.maps),e.from=null,e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),void e.drawdots(e.maps);e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawrecords(s),e.drawdots(e.maps)}),document.querySelector("#locked").addEventListener("click",function(){if(e.records.length<2)return alert("请设置密码");e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawdots(e.maps,!0),e.locked=!0,alert("设置成功"),e.from=null,t.restore(e.maps)}),document.querySelector("#unlocked").addEventListener("click",function(){return t.compare(e.recordsT,e.records)?alert("密码破解"):(e.recordsT=[],e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.from=null,t.restore(e.maps),e.drawdots(e.maps,!0),alert("密码错误"))})}},{key:"drawrecords",value:function(t){for(var e=0,c=t.length;e<c;e++)t[e+1]&&(this.ctx.beginPath(),this.ctx.moveTo(t[e].x,t[e].y),this.ctx.lineTo(t[e+1].x,t[e+1].y),this.ctx.stroke(),this.ctx.closePath()),this.ctx.beginPath(),this.ctx.arc(t[e].x,t[e].y,5,0,2*Math.PI,!1),this.ctx.save(),this.ctx.strokeStyle="red",this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()}},{key:"checkDistance",value:function(t,e){var c=this;this.maps.forEach(function(r){Math.sqrt((r.x-t)*(r.x-t)+(r.y-e)*(r.y-e))<10&&(r.state=!0,c.ctx.beginPath(),c.checkline(c.from,r),c.ctx.arc(r.x,r.y,5,0,2*Math.PI,!1),c.from=r,c.locked?-1==c.recordsT.indexOf(r)&&c.recordsT.push(r):-1==c.records.indexOf(r)&&c.records.push(r),c.ctx.save(),c.ctx.strokeStyle="red",c.ctx.closePath(),c.ctx.stroke(),c.ctx.restore())})}},{key:"checkline",value:function(t,e){this.maps.indexOf(e);var c=this.maps.indexOf(t);if(e.should)for(var r=0,s=e.should.length;r<s;r++)if(e.should[r].from==c){var o=this.maps[e.should[r].addcheck];o.state||this.stroke(o)}}},{key:"stroke",value:function(t){t.state=!0,this.locked?this.recordsT.push(t):this.records.push(t),this.ctx.beginPath(),this.ctx.arc(t.x,t.y,5,0,2*Math.PI,!1),this.ctx.save(),this.ctx.strokeStyle="red",this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()}}],[{key:"restore",value:function(t){t.forEach(function(t){t.state=!1})}},{key:"compare",value:function(t,e){if(t.length!=e.length)return!1;for(var c=0,r=t.length;c<r;c++)if(t[c].x!=e[c].x||t[c].y!=e[c].y)return!1;return!0}}]),t}())("lock",[{x:20,y:20,should:[{from:2,addcheck:1},{from:6,addcheck:3},{from:8,addcheck:4}],state:!1},{x:100,y:20,should:[{from:7,addcheck:4}],state:!1},{x:180,y:20,should:[{from:0,addcheck:1},{from:6,addcheck:4},{from:8,addcheck:5}],state:!1},{x:20,y:100,should:[{from:5,addcheck:4}],state:!1},{x:100,y:100,state:!1},{x:180,y:100,should:[{from:3,addcheck:4}],state:!1},{x:20,y:180,should:[{from:0,addcheck:3},{from:8,addcheck:7},{from:2,addcheck:4}],state:!1},{x:100,y:180,should:[{from:1,addcheck:4}],state:!1},{x:180,y:180,should:[{from:0,addcheck:4},{from:2,addcheck:5},{from:6,addcheck:7}],state:!1}])}]);